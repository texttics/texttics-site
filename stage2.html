<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage 2: Macrostructure Profile</title>

    <link rel="stylesheet" href="https://pyscript.net/releases/2024.9.1/core.css">
    <script type="module" config="pyscript.toml" src="https://pyscript.net/releases/2024.9.1/core.js"></script>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="masthead">
    <h1 class="app-title">Stage 2</h1>
    <p class="spec">The "Altitude View": Macrostructure Profile</p>
    <p><a href="index.html" title="Go back to the main app">← Back to Stage 1 (Microscope)</a></p>
    <div class="controls">
        <button id="btn-copy-report" type="button" class="app-button" disabled>Copy JSON Report</button>
    </div>
  </header>

<main id="main" style="padding: 2rem;">
    <div id="loading-status">Loading Stage 2...</div>
    
    <div id="sparkline-output" style="margin-bottom: 2rem;">
        </div>
    
    <div id="macro-table-output">
        <table class="matrix">
            <thead>
                <tr>
                    <th scope="col" rowspan="2">Segment</th>
                    <th scope="col" rowspan="2">Indices (Grapheme)</th>
                    <th scope="col" rowspan="2">Grapheme Count (Volume)</th>
                    <th scope="colgroup" colspan="7">Visible Content Runs (Length Distribution)</th>
                    <th scope="colgroup" colspan="3">Visible Separator Runs (Gaps)</th>
                    <th scope="colgroup" colspan="3">Invisible Atoms (Integrity)</th>
                    <th scope="colgroup" colspan="2">Threat Location (Flags)</th>
                </tr>
                <tr>
                    <th scope="col">1 gr.</th>
                    <th scope="col">2 gr.</th>
                    <th scope="col">3-5 gr.</th>
                    <th scope="col">6-10 gr.</th>
                    <th scope="col">11+ gr.</th>
                    <th scope="col">Total Runs</th>
                    <th scope="col">Avg. Length</th>
                    
                    <th scope="col">Space Runs</th>
                    <th scope="col">Line Breaks</th>
                    <th scope="col">Avg. Space</th>
                    
                    <th scope="col">Bidi</th>
                    <th scope="col">Join</th>
                    <th scope="col">Other Cf/Cc</th>
                    
                    <th scope="col">Critical</th>
                    <th scope="col">All Flags</th>
                </tr>
            </thead>
            <tbody id="macro-table-body">
                </tbody>
        </table>
    </div>
  </main>
  
    <script type="py" src="stage2.py"></script>
</body>
</html>
