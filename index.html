<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Text...tics — A Deterministic Structural Fingerprinter</title>

  <!-- PyScript (will be needed for app.py) -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.9.1/core.css">
  <script type="module" config="pyscript.toml" src="https://pyscript.net/releases/2024.9.1/core.js"></script>

  <!-- Main application stylesheet -->
  <link rel="stylesheet" href="styles.css">

  <!-- 
    Your Python (app.py) and JS (ui-glue.js) will be added later.
    <script type="py" src="app.py" config="pyscript.toml"></script>
    <script type="module" src="ui-glue.js"></script>
  -->
</head>
<body>
  <!-- Visible, first-focusable skip link for accessibility -->
  <a class="skip-link" href="#main">Skip to main content</a>

  <!-- Zone 0: Lab Instrument Masthead (Static Header) -->
  <header class="masthead" role="banner">
    <h1 class="app-title">Text...tics</h1>
    <p class="spec">A Deterministic Structural Fingerprinter (Unicode 15.1 Ruleset)</p>
    <p class="method">Method: Post-clipboard analysis based on UAX #29 (Graphemes) &amp; UAX #44 (Properties).</p>
  </header>

  <!-- Two-column "Lab Bench" layout -->
  <div class="lab-bench">
    
    <!-- Column 1: Sticky In-Page Jump List -->
    <nav class="jump-list" aria-label="Sections">
      <ol>
        <li><a href="#dual-atom">Dual-Atom Fingerprint <span id="toc-dual-count" class="count">(0)</span></a></li>
        <li><a href="#structural-shape">Structural Shape <span id="toc-shape-count" class="count">(0)</span></a></li>
        <li><a href="#forensic-integrity">Forensic Integrity <span id="toc-forensic-count" class="count">(0)</span></a></li>
        <li><a href="#provenance-context">Provenance &amp; Context <span id="toc-prov-count" class="count">(0)</span></a></li>
        <li><a href="#threat-hunting">Threat-Hunting <span id="toc-threat-count" class="count">(0)</span></a></li>
      </ol>
    </nav>

    <!-- Column 2: Main Analysis Content (Scrollable) -->
    <main id="main">

      <!-- Group 1: Analysis Configuration (Control Plane) -->
      <section id="control-plane" aria-labelledby="control-plane-title">
        <h2 id="control-plane-title" class="section-title">Analysis Configuration</h2>
        <label for="text-input" class="visually-hidden">Text input</label>
        <textarea id="text-input" placeholder="Paste or type here..."></textarea>
        
        <!-- Live status line for loader/errors -->
        <p id="status-line" role="status" aria-live="polite" class="status">Waiting for input…</p>
      </section>

      <!-- 
        GROUP 2: THE STRUCTURAL FINGERPRINT
      -->

      <!-- Group 2.A: Dual-Atom Fingerprint (Module 1) -->
      <section id="dual-atom" class="fingerprint-section" aria-labelledby="dual-atom-title">
        <h2 id="dual-atom-title" class="section-title">
  <span>Dual-Atom Fingerprint</span>
  <button id="copy-report-btn" class="copy-btn" title="Copy full structured report">
    Copy Report
  </button>
</h2>

        <!-- WAI-ARIA Tabs pattern (Overview | Full Breakdown) -->
        <div class="tabs">
          <div role="tablist" aria-label="Dual-Atom tabs">
            <button role="tab" id="tab-overview" aria-selected="true" aria-controls="panel-overview">
              Overview
            </button>
            <button role="tab" id="tab-breakdown" aria-selected="false" tabindex="-1" aria-controls="panel-breakdown">
              Full Breakdown (30)
            </button>
          </div>

          <!-- Tab Panel 1: Overview (Default) -->
          <div id="panel-overview" role="tabpanel" aria-labelledby="tab-overview">
            
            <h3 class="subsection-title">Meta-Analysis (Totals)</h3>
            <div class="cards" id="meta-totals-cards">
              <!-- Python will inject cards here, e.g.:
              <div class="card"><strong>Total Code Points</strong><div>0</div></div>
              <div class="card"><strong>Total Graphemes</strong><div>0</div></div>
              -->
            </div>

            <h3 class="subsection-title">Grapheme Structural Integrity</h3>
            <div class="cards" id="grapheme-integrity-cards">
              <!-- Python will inject cards here -->
            </div>

            <h3 class="subsection-title">Major Category Parallel View</h3>
            <table class="matrix" id="major-parallel-table">
              <caption>Major Categories — Code Points vs. Graphemes</caption>
              <thead>
                <tr>
                  <th scope="col">Category</th>
                  <th scope="col">Code Points (Logical)</th>
                  <th scope="col">Graphemes (Perceptual)</th>
                </tr>
              </thead>
              <tbody id="major-parallel-body">
                <!-- Python will inject <tr> rows here -->
              </tbody>
            </table>
          </div>

          <!-- Tab Panel 2: Full Breakdown -->
          <div id="panel-breakdown" role="tabpanel" aria-labelledby="tab-breakdown" hidden>
            <h3 class="subsection-title">Minor Category Parallel View</h3>
            <table class="matrix" id="minor-parallel-table">
              <caption>Full Breakdown (30 minor categories) — Code Points vs. Graphemes</caption>
              <thead>
                <tr>
                  <th scope="col">Minor Category</th>
                  <th scope="col">Code Points (Logical)</th>
                  <th scope="col">Graphemes (Perceptual)</th>
                </tr>
              </thead>
              <tbody id="minor-parallel-body">
                <!-- Python will inject <tr> rows here -->
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Group 2.B: Structural Shape Fingerprint (Module 2) -->
      <section id="structural-shape" class="fingerprint-section" aria-labelledby="shape-title">
        <h2 id="shape-title" class="section-title">Structural Shape Fingerprint</h2>
        
    <table class="matrix" id="shape-matrix">
          <caption>Sequence (Run) Analysis</caption>

      <!-- Group 2.C: Forensic Integrity Fingerprint (Modules 4, 6, 8) -->
      <section id="forensic-integrity" class="fingerprint-section" aria-labelledby="forensic-title">
        <h2 id="forensic-title" class="section-title">Forensic Integrity Fingerprint</h2>
        <table class="matrix" id="forensic-matrix">
          <caption>Forensic Flags (Invisibles, Modifiers, IVS)</caption>
          <thead>
            <tr>
              <th scope="col">Metric</th>
              <th scope="col">Count</th>
              <th scope="col">Positions</th>
            </tr>
          </thead>
          <tbody id="forensic-matrix-body">
            <!-- Python will inject <tr> rows here -->
          </tbody>
        </table>
      </section>

      <!-- Group 2.D: Provenance & Context Fingerprint (Modules 5, 6) -->
      <section id="provenance-context" class="fingerprint-section" aria-labelledby="prov-title">
        <h2 id="prov-title" class="section-title">Provenance &amp; Context Fingerprint</h2>
        <table class="matrix" id="provenance-matrix">
          <caption>Script, Script-Extension, Block, Age &amp; Numeric Properties</caption>
          <thead>
            <tr>
              <th scope="col">Metric</th>
              <th scope="col">Count</th>
            </tr>
          </thead>
          <tbody id="provenance-matrix-body">
            <!-- Python will inject <tr> rows here -->
          </tbody>
        </table>
      </section>

      <!-- Group 3: Threat-Hunting (Module 7) will go here later -->
      <section id="threat-hunting" class="fingerprint-section" aria-labelledby="threat-title">
         <h2 id="threat-title" class="section-title">Threat-Hunting Analysis</h2>
         <!-- Content for Module 7 will be planned and added here -->
         <p class="placeholder-text">Threat-Hunting (Module 7) content will be designed here.</p>
      </section>

    </main>
  </div> <!-- /.lab-bench -->

<script type="py" src="app.py"></script>
<script src="ui-glue.js" defer></script>
  
</body>
</html>
